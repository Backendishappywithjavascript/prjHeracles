<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'/>
	<title> Jogo </title>
	<script type="text/javascript">
	
		//controle da movimentação do personagem
		var moverDireitaPermissao = false; 
		var moverEsquerdaPermissao = false; 
		var controleMovimentoEsquerda = false;
		var controleMovimentoDireita = false;
		
		function janelaTemporaria(pagina, caso, dd1, dd2, dd3, orig,ext,dd4) {
		
		var xmlhttp = createRequest();
		var obj = document.getElementById("container");
		switch (caso) {
			case'exibirPrimeiraImagem':
				obj = document.getElementById("primeiroJogador");	
				break;
			}				

    			var dados = "caso=" + escape(caso)+'&dd1='+ escape(dd1)+'&dd2='+ escape(dd2)+'&dd3='+ escape(dd3)+"&dado1="+escape(dd1)+"&dado2="+escape(dd2)+"&dado3="+escape(dd3)
				+'&orig='+ escape(orig)+'&dd4='+ escape(dd4)+'&retorno='+ escape(ext)+'&origem='+ escape(orig);	
				if(orig =='novaOrdCarga') dados= dados+'&motorista='+ext;
	
				obj.innerHTML = "<p class=\"jan_lista bold\" style=\" padding:50px;\">Aguarde...</p>";
	
				xmlhttp.open("POST", pagina, true);
				xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");	
				xmlhttp.onreadystatechange = function() {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
			
		
				switch(orig){

				case'atualizar':
				location.reload();
				break;

			
					default:
					obj.innerHTML = xmlhttp.responseText;
					break;
					}
					
					}
	
	
				}	
			xmlhttp.send(dados);
		}
		function vwValue()
		{
			return document.documentElement.clientWidth / 100;
		}
		function vwToPx(vw)
		{
			var px = vwValue();
			px = vw.substr(0, vw.length - 2);
			return px + 'px';
		}
		function checkInteractability()
		{
			var player = document.getElementById('player');	
			var portaInformatica = document.getElementById('portaInformatica');
			var portaEnfermagem = document.getElementById('portaEnfermagem');
			var portaInscricao = document.getElementById('portaInscricao');
			var portaTurismo = document.getElementById('portaTurismo');
			var portaEdificacoes = document.getElementById('portaEdificacoes');
			var portas = new Array(portaInformatica,portaEnfermagem,portaEdificacoes,portaTurismo,portaInscricao)
			for(let count = 0;count < portas.length; count++)
			{
				if (
					//Código opressor
					parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) +
					(parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) >
			    	parseFloat(portas[count].style.left.substr(0,parseFloat(portas[count].style.left.length) - 2))  &&
			    	parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) + 
			    	(parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) <
			    	(parseFloat(portas[count].style.left.substr(0,parseFloat(portas[count].style.left.length) - 2)) +	
			    	parseFloat(portas[count].style.width.substr(0,parseFloat(portas[count].style.width.length) - 2))))
				{
					if(portas[count].style.backgroundImage.substr(-5) != 'gif")')
					{
						portas[count].style.backgroundImage = portas[count].style.backgroundImage.substr(0,portas[count].style.backgroundImage.length - 5) + 'gif")';
					}
			   		else
			   		{
			   			
			   		}
				}
				else
				{
					if(portas[count].style.backgroundImage.substr(-5) == 'gif")')
					{
						portas[count].style.backgroundImage = portas[count].style.backgroundImage.substr(0,portas[count].style.backgroundImage.length - 5) + 'png")';
					}
				}
			}
		}
		
		function interact()
		{
			// Elementos
			var player = document.getElementById('player');	
			var portaInformatica = document.getElementById('portaInformatica');
			var portaEnfermagem = document.getElementById('portaEnfermagem');
			var portaTurismo = document.getElementById('portaTurismo');
			var portaEdificacoes = document.getElementById('portaEdificacoes');
			var portaInscricao = document.getElementById('portaInscricao');
			var portas = new Array(portaInformatica,portaEnfermagem,portaTurismo,portaEdificacoes,portaInscricao)
			for(let count = 0;count < portas.length; count++)
			{
				if (
					//Código opressor
					parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) +
					(parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) >
			    	parseFloat(portas[count].style.left.substr(0,parseFloat(portas[count].style.left.length) - 2))  &&
			    	parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) + 
			    	(parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) <
			    	(parseFloat(portas[count].style.left.substr(0,parseFloat(portas[count].style.left.length) - 2)) +	
			    	parseFloat(portas[count].style.width.substr(0,parseFloat(portas[count].style.width.length) - 2))))
			    {
			    	var confirmar = confirm('Deseja ir para ' + portas[count].getAttribute('NAME') + '?');
			    	if(confirmar == true)
			    	{
			    		switch(count)
			    		{
			    			case 4:
			    				window.open("https://www.vestibulinhoetec.com.br/candidato/dados-acesso.asp");
			    				break;
			    		}
			    		 
			    	}
			    }
			}
		}
		
		window.onkeydown = () => {		
			var player = document.getElementById('player');
			switch(event.keyCode)
			{			
				case 32:
					alert("Player Left " + parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)));
					alert("Player Width: " + player.style.width);	
					alert("View Width Value: " + vwValue());				
					break;
				case 69:
					interact();
					break;	
				case 39:
					moverDireitaPermissao = true;
					if(controleMovimentoDireita)
					{
						
					}
					else
					{
						moverDireita();
						controleMovimentoDireita = true;
					}
					break;
				case 37:
					moverEsquerdaPermissao = true;
					if(controleMovimentoEsquerda)
					{
						
					}
					else
					{
						moverEsquerda();
						controleMovimentoEsquerda = true;
					}
					break;	
			}}
			window.onkeyup = () => {					
			switch(event.keyCode)
			{	
				case 39:
						moverDireitaPermissao = false;
						controleMovimentoDireita = false;
					break;
				case 37:
						moverEsquerdaPermissao = false;
						controleMovimentoEsquerda = false;
					break;	
			}}
			function moverDireita()
			{
				var player = document.getElementById('player');
				if(parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) >= 99 - parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)))
				{

				}
				else
				{
					player.style.left = (parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) + 0.15)+'vw';
					checkInteractability();
					if(moverDireitaPermissao)
					{
						setTimeout(()=>{moverDireita()},10);
					}
				}			
			}
			function moverEsquerda()
			{
				var player = document.getElementById('player');
				if(parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) <= 0.05)
				{

				}
				else
				{
					player.style.left = (parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) - 0.15)+'vw';
					checkInteractability();
					if(moverEsquerdaPermissao)
					{
						setTimeout(()=>{moverEsquerda()},10);
					}
					
				}	
			}
	</script>
</head>
<body>
	<div id="container">
		<div id="infoDiv">
			Use as setas para se mover!
			<br />
			Aperte "E" para interagir com o ambiente!
		</div>
	 	<div id='player' style="
	 	background-image: url('img/heracles.png');
		background-size: 100% 100%;
	 	left: 0.05vw;
	 	height: 12vw;
	 	width: 6vw;">
 		</div>

 		<div id="portaInformatica" name='Desenvolvimento de Sistemas' style="
	 	background-image: url('img/portas/portaDS.png');
		background-size: 100% 100%;
 		left: 20vw;
		height: 17vw;
		width: 8vw;">

 		</div>
 		<div id="portaEnfermagem" name='Enfermagem' style="
	 	background-image: url('img/portas/portaENF.png');
		background-size: 100% 100%;
 		left: 35vw;
		height: 17vw;
		width: 8vw;">

 		</div>
 		<div id="portaEdificacoes" name='Edificações' style="
 		background-image: url('img/portas/portaEDI.png');
		background-size: 100% 100%;
 		left: 50vw;
		height: 17vw;
		width: 8vw;">

 		</div>
 		<div id="portaTurismo" name='Turismo' style="
	 	background-image: url('img/portas/portaTUR.png');
		background-size: 100% 100%;
 		left: 65vw;
		height: 17vw;
		width: 8vw;">

 		</div>
 		<div id="portaInscricao" name='Inscreva-se' style="
 		background-image: url('img/portas/portaINSC.png');
		background-size: 100% 100%;
 		left: 90vw;
		height: 17vw;
		width: 8vw;">

 		</div>
	</div>


</body>
</html>
<style type="text/css">
*
{
	padding: 0;
	margin: 0;
}
html
{
	width: 100%;
	height: 100%;
	overflow: none;
}
body
{
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
}
#container
{
	width: 100%;
	height: 97%;
	border-bottom: 1px black solid;
}
#infoDiv
{
	border: 3px black dashed;
	position: absolute;
	padding: 5px;
	top: 1vw;
	left: 1vw;
	font-family: 'Cd';	
}
#player
{	
	position: relative;	
	top: calc(100% - 11.3vw);
	z-index: 10;
}
#portaInformatica, #portaEnfermagem, #portaInscricao, #portaTurismo, #portaEdificacoes
{
	position: relative;
}
#portaInformatica
{
	top: calc(100% - 29vw);
}
#portaEnfermagem
{
	top: calc(100% - 46vw);
}
#portaEdificacoes
{
	top: calc(100% - 63vw);
}
#portaTurismo
{
	top: calc(100% - 80vw);
}
#portaInscricao
{
	top: calc(100% - 97vw);
}
</style>

