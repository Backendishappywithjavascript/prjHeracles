<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'/>
	<link rel="stylesheet" href="style.css" type="text/css" />
	<title> Jogo </title>
	<script type="text/javascript" src="classes/main.js"></script>
	<script type="text/javascript">
	
		//controle da movimentação do personagem
		var movimentandoDireita = false; 
		var movimentandoEsquerda = false; 
		var controleMovimentoEsquerda = false;
		var controleMovimentoDireita = false;
		var comandos = true;
		var interagindo = false;
		
		//ESCRITOR DAS DIVS
		var escritor = false;
		
		//OBJETOS INTERATIVOS
			//PRINCIPAL
		var portaInformatica = new ObjetoInterativo('portaInformatica', 'porta', 'Sala de Desenvolvimento de Sistemas', 1);
		var portaEnfermagem = new ObjetoInterativo('portaEnfermagem', 'porta', 'Sala de Enfermagem', 2);
		var portaTurismo = new ObjetoInterativo('portaTurismo', 'porta', 'Turismo', 3);
		var portaEdificacoes = new ObjetoInterativo('portaEdificacoes', 'porta', 'Sala de Edificações', 4);
		var portaAdministracao = new ObjetoInterativo('portaAdministracao', 'porta', 'Sala de Administração', 5);
		var portaManutencao = new ObjetoInterativo('portaManutencao', 'porta', 'Sala de Manutenção', 6);
		var portaInscricao = new ObjetoInterativo('portaInscricao', 'porta', 'Inscreva-se', 7);
		var objetosPrincipal = new Array(portaInformatica,portaEnfermagem,portaEdificacoes,portaTurismo,portaAdministracao,portaManutencao,portaInscricao);	
		
			//INF
			/*COMPUTADOR UM*/
		var computadorUmDialogoParteUm = new DialogoParte(`LINGUAGENS DE PROGRAMAÇÃO.
		Uma linguagem de programação é basicamento uma tradução da linguagem humana (palavras) para a linguagem da máquina que são os bits (zeros e uns) tornando assim possível a compreensão do humano e a utilização de tais linguagens para desenvolver sistemas, sejam eles sites, programas ou aplicativos.
		PRESSIONE "E" PARA AVANÇAR...`, null);	
		var computadorUmDialogoParteDois = new DialogoParte(`UTILIZAÇÃO DAS LINGUAGENS. 
		Como existem diversas linguagens de programação, geralmente o programador escolhe a sua com base no gosto pessoal, na finalidade do sistema que ele desenvolverá e na eficiência da mesma.
		Algumas linguagens, por exemplo, propiciam um ambiente para o desenvolvimento e manipulação da interface gráfica, que é desejado quando o sistema será utilizado por usuários leigos no assunto, mas nem tanto quando se almeja eficiência e baixo uso de componentes da máquina.
		PRESSIONE "E" PARA AVANÇAR...`, null);	
		var computadorUmDialogoParteTres = new DialogoParte(`EXEMPLOS DE LINGUAGENS.
		Algumas linguagens que podem ser citadas são: Python, C# e Javascript.
		PRESSIONE "E" PARA AVANÇAR...`, null);
		var computadorUmDialogoParteQuatro = new DialogoParte(`Python.
		Linguagem muito bem vista quando o assunto é eficiência, pois o código e mais limpo, menor e mais intuitivo, porém carece da facilidade de se criar uma interface gráfica.
		É muito utilizada no âmbito de inteligencia artificial, analise de dados, e simulações de engenharia.
			PRESSIONE "E" PARA AVANÇAR...`, null);
		var computadorUmDialogoParteCinco = new DialogoParte(`C#.
		C# é uma linguagem forte e muito utilizada no mercado de trabalho, possui facilidade na criação e manuseio de interfaces gráficas, possui uma comunidade forte e é muito utilizada na criação de sistemas desktop, e principalmente jogos.
		PRESSIONE "E" PARA AVANÇAR...`, null);
		var computadorUmDialogoParteSeis = new DialogoParte(`JavaScript.
		É uma linguagem leve, que é utilizada, principalmente para realizar validações (como validar o CPF por exemplo), animações, e gerenciar a interação do usuário com a página da internet.
		Mas, não se é obrigátorio, este jogo por exemplo foi feito em JavaScript, não C#.
		PRESSIONE "E" PARA SAIR...`, null)
		var computadorUmDialogos = new Array(computadorUmDialogoParteUm, computadorUmDialogoParteDois, computadorUmDialogoParteTres, computadorUmDialogoParteQuatro, computadorUmDialogoParteCinco, computadorUmDialogoParteSeis); 
		var computadorUmDialogo = new DialogoInterativo('interactabilityDiv', 'img/telas/telaComputador.jpg', computadorUmDialogos);
		
		
			/*COMPUTADOR DOIS*/
		var computadorDoisDialogoParteUm = new DialogoParte(`BANCO DE DADOS.
		Um banco de dados é utilizado para armazenar informação, isto é, dados, para um ou mais sistemas mesmo quando os mesmos não estiverem em tempo de execução.
		PRESSIONE "E" PARA AVANÇAR...`, null);	
		var computadorDoisDialogoParteDois = new DialogoParte(`MORFOLOGIA.
		O banco de dados é, geralmente, organizada através de tabelas onde cada coluna representa um atributo e cada linha representa um registro (conhecido como tupla), como é visível no exemplo a seguir.
		PRESSIONE "E" PARA AVANÇAR...`, null);	
		var computadorDoisDialogoParteTres = new DialogoParte(`TABELA DE CLIENTES 
	|Código |	Nome | Idade | Sexo |
		1	Ana 	       15	   S	
		2	Davi        30	   M	
		3	José       45        M
		PRESSIONE "E" PARA SAIR...`, null);	
		var computadorDoisDialogos = new Array(computadorDoisDialogoParteUm, computadorDoisDialogoParteDois, computadorDoisDialogoParteTres); 
		var computadorDoisDialogo = new DialogoInterativo('interactabilityDiv', 'img/telas/telaComputador.jpg', computadorDoisDialogos);
		
		
			/*COMPUTADOR TRÊS*/
		var computadorTresDialogoParteUm = new DialogoParte(`REDES.
		Uma rede é um agrupamento de dispositivos (Computadores, Celulares, Etc) que compartilham informações entre si.
		A internet, por exemplo, é uma grande rede que conecta aperelhos ao redor do mundo todo.`, null);	
		var computadorTresDialogoParteDois = new DialogoParte(`CRIAÇÃO.
		A invenção da rede se iniciou como um projeto militar, que visava interligar diversas bases de grande poder bélico para criar um sistema de defesa que pudesse lançar um contra-ataque, caso a outra base fosse bombardeada ou não pudesse contra-atacar.`, null);	
		var computadorTresDialogoParteTres = new DialogoParte(`FINALIDADE.
		A possibilidade da transmissão de dados entre dispositivos possui, atualmente, diversas possibilidades, tais como:
			- A não necessidade da trasmissão física (Pendrives, CDs, etc)
			- A possibilidade da transmissão a longa distância (até mesmo intercontinental)
			- A capacidade do acesso a aplicações sem precisar te-la em seu dispositivo (Sites)`, null);	
		var computadorTresDialogos = new Array(computadorTresDialogoParteUm, computadorTresDialogoParteDois, computadorTresDialogoParteTres); 
		var computadorTresDialogo = new DialogoInterativo('interactabilityDiv', 'img/telas/telaComputador.jpg', computadorTresDialogos);
		/*---------------------------------------------------*/
		
		
			/*PROFESSOR*/
		var professoraDialogoParteUm = new DialogoParte(`É uma Rede Top`, null);	
		var professoraDialogoParteDois = new DialogoParte(`É uma Rede Magnífico
		Uau!`, null);	
		var professoraDialogos = new Array(professoraDialogoParteUm, professoraDialogoParteDois); 
		var professoraDialogo = new DialogoInterativo('interactabilityDiv', 'img/telas/telaComputador.jpg', professoraDialogos);
		/*---------------------------------------------------*/
		
			
		var computadorUm = new ObjetoInterativo('computadorUm', 'computador', 'Linguagens de Programação', computadorUmDialogo);
		var computadorDois = new ObjetoInterativo('computadorDois', 'computador', 'Bancos de Dados', computadorDoisDialogo);
		var computadorTres = new ObjetoInterativo('computadorTres', 'computador', 'Redes', computadorTresDialogo);
		var professora = new ObjetoInterativo('professora', 'professora', 'Exercício', null);
		
		
			//OBJETOS
		var objetosInformatica = new Array(computadorUm,computadorDois,computadorTres,professora);	
		var salaAtual = 0;	
		var objetos = new Array(objetosPrincipal,objetosInformatica);
			
		
		
			//INF INFORMAÇÃO
		/*var computadorUmPhoto = "img/telas/telaJavaScript.jpg";
		var computadorDoisPhoto = "img/telas/telaHTMLCSS.jpg";
		var computadorTresPhoto = "img/telas/telaCSharp.jpg";
		var professoraPhoto = "img/telas/professora.jpg";*/
		
		
		function vwValue()
		{
			return document.documentElement.clientWidth / 100;
		}
		function vwToPx(vw)
		{
			var px = vwValue();
			px = vw.substr(0, vw.length - 2);
			return px + 'px';
		}
		function checkInteractability()
		{
			var player = document.getElementById('player');	
			
			if(comandos == true)
			{
				for(let contar = 0;contar < objetos[salaAtual].length; contar++)
				{
					var objAtual = document.getElementById(objetos[salaAtual][contar].getId());
					if (//Código opressor
						parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) +
						(parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) >
			    		parseFloat(objAtual.style.left.substr(0,parseFloat(objAtual.style.left.length) - 2))  &&
			    		parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) + 
			    		(parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) <
			    		(parseFloat(objAtual.style.left.substr(0,parseFloat(objAtual.style.left.length) - 2)) +	
			    		parseFloat(objAtual.style.width.substr(0,parseFloat(objAtual.style.width.length) - 2))))
						{
							if(objetos[salaAtual][contar].getTypeInteract() == "porta" && objAtual.style.backgroundImage.substr(-5) != 'gif")')
							{
								objAtual.style.backgroundImage = objAtual.style.backgroundImage.substr(0,objAtual.style.backgroundImage.length - 5) + 'gif")';
							}
			   				else
			   				{
			   			
			   				}
			   				document.getElementById('interactabilityDiv').innerHTML = objetos[salaAtual][contar].getName();
			   				break;
						}
					else
					{
						if(objAtual.style.backgroundImage.substr(-5) == 'gif")')
						{
							objAtual.style.backgroundImage = objAtual.style.backgroundImage.substr(0,objAtual.style	.backgroundImage.length - 5) + 'png")';
						}
						document.getElementById('interactabilityDiv').innerHTML = "";
					}
				}	
			}
		}
		
		function interact()
		{

			var player = document.getElementById('player');	
			
			for(let contar = 0;contar < objetos[salaAtual].length; contar++)
			{
				var objAtual = document.getElementById(objetos[salaAtual][contar].getId());
				if (//Código opressor
				parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) +
				(parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) >
			    parseFloat(objAtual.style.left.substr(0,parseFloat(objAtual.style.left.length) - 2))  &&
			    parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) + 
			    (parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)) / 2) <
			    (parseFloat(objAtual.style.left.substr(0,parseFloat(objAtual.style.left.length) - 2)) +	
			    parseFloat(objAtual.style.width.substr(0,parseFloat(objAtual.style.width.length) - 2))))
				{
					movimentandoDireita = false; 
					movimentandoEsquerda = false; 
					controleMovimentoEsquerda = false;
					controleMovimentoDireita = false;
					player.style.backgroundImage= "url(img/heracles/stopped.gif)";
					interagindo = objetos[salaAtual][contar].getId();
					switch(objetos[salaAtual][contar].getTypeInteract())
			    	{
			    		case 'porta':
			    			mudarLugar(objetos[salaAtual][contar].getData());
			    			break;
			    			
			    		case 'computador':
			    			
			    			comandos = false;
			    			var tela = document.getElementById(objetos[salaAtual][contar].getData().getId());
			    			tela.innerHTML = `
			    			<div id='interactDiv' style='position:absolute;background-size: 100% 100%;background-repeat: no-repeat;z-index: 12;left: 25vw;top: 5vh;width: 40vw;height: 50vh;background-image: url(`+ objetos[salaAtual][contar].getData().getBackground() + `)' '>
			    				
			    				<div style='margin-left: 10%;width:80%;margin-top: 7.5vh;height: 70%;wrap'>
			    					<textarea readonly="true" id='computadorTexto' style='resize: none;'></textarea>
			    				</div>
			    				<span id='spanFechar' onclick='comandos = true;limparElemento("` + objetos[salaAtual][contar].getData().getId()  + `")'>X</span>
			    			</div>`;
			    			
			    			var computerDialogActualPart = objetos[salaAtual][contar].getData().getActualPart();
			    			
			    			escrever(objetos[salaAtual][contar].getData().getParts()[computerDialogActualPart].getText(),'computadorTexto');
			    			break;	
			    			
			    		case 'professora':
			    			alert('Olá, sou a professora!');
			    			break;
			    	}
			    	break;
				}
				else
				{
					
				}
			}
		}
		
		window.onkeydown = () => {		
			var player = document.getElementById('player');
			if(comandos)
			{
				switch(event.keyCode)
				{			
					case 32:
						alert("Player Left " + parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)));
						alert("Player Width: " + player.style.width);	
						alert("View Width Value: " + vwValue());				
						break;
					case 69:
						interact();
						break;	
					case 39:
						movimentandoDireita = true;
						if(controleMovimentoDireita)
						{
						
						}
						else
						{
							moverDireita();
							controleMovimentoDireita = true;
							player.style.transform = 'scaleX(1)';
							player.style.backgroundImage= 'url("img/heracles/walking.gif")';
						}
						break;
					case 37:
						movimentandoEsquerda = true;
						if(controleMovimentoEsquerda)
						{
						
						}
						else
						{
							moverEsquerda();
							controleMovimentoEsquerda = true;
							player.style.transform = 'scaleX(-1)';
							player.style.backgroundImage= 'url("img/heracles/walking.gif")';
						}
						break;	
				}
			}
			else
			{
				switch(event.keyCode)
				{	
					case 69:
						interactDialog();
						break;	
					default:
						break;
				}
			}
			}
			window.onkeyup = () => {					
			switch(event.keyCode)
			{	
				case 39:
						movimentandoDireita = false;
						controleMovimentoDireita = false;
						if(!movimentandoEsquerda)
						{
							player.style.backgroundImage= 'url("img/heracles/stopped.gif")';	
						}
					break;
				case 37:
						movimentandoEsquerda = false;
						controleMovimentoEsquerda = false;
						if(!movimentandoDireita)
						{
							player.style.backgroundImage= 'url("img/heracles/stopped.gif")';	
						}
					break;	
			}}
			function moverDireita()
			{
				var player = document.getElementById('player');
				if(parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) >= 99 - parseFloat(player.style.width.substr(0,parseFloat(player.style.width.length) - 2)))
				{

				}
				else
				{
					player.style.left = (parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) + 0.15)+'vw';
					checkInteractability();
					if(player.style.transform == "scaleX(-1)")
					{
						player.style.transform = "scaleX(1)";
					}
					if(movimentandoDireita)
					{
						setTimeout(()=>{moverDireita()},10);
					}
				}			
			}
			function moverEsquerda()
			{
				var player = document.getElementById('player');
				if(parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) <= 0.05)
				{

				}
				else
				{
					player.style.left = (parseFloat(player.style.left.substr(0,parseFloat(player.style.left.length) - 2)) - 0.15)+'vw';
					checkInteractability();
					if(player.style.transform == "scaleX(1)")
					{
						player.style.transform = "scaleX(-1)";
					}
					if(movimentandoEsquerda)
					{
						setTimeout(()=>{moverEsquerda()},10);
					}
					
				}	
			}
			
		
	</script>
</head>
<body>
	
</body>
<script type="text/javascript">
	function mudarLugar(sala) 
		{
			switch(sala)
			{
				case 0:
				document.body.innerHTML = `
				<div id="container" data-screen='main' style='background-image: url("img/fundos/main.png");background-size: 100% 100%;'>
					<div id="infoDiv">
					Use as setas para se mover!
					<br />
					Aperte "E" para interagir com o ambiente!
					</div>
					<div id="interactabilityDiv">
				
					</div>
					<div id="showInfo">
			
					</div>
	 				<div id='player' style="
					background-image: url('img/heracles/stopped.gif');
					background-size: 100% 100%;
					background-position: 0px 0px;
	 				left: 0.05vw;
	 				height: 12vw;
	 				width: 9vw;">
 					</div>

 					<div id="portaInformatica" style="
	 				background-image: url('img/portas/portaDS.png');
					background-size: 100% 100%;
 					left: 20vw;
					height: 17vw;
					width: 8vw;">

 					</div>
 					<div id="portaEnfermagem" style="
					background-image: url('img/portas/portaENF.png');
					background-size: 100% 100%;
 					left: 30vw;
					height: 17vw;
					width: 8vw;">

					</div>
					<div id="portaEdificacoes" style="
 					background-image: url('img/portas/portaEDI.png');
					background-size: 100% 100%;
					left: 40vw;
					height: 17vw;
					width: 8vw;">

 					</div>
 					<div id="portaTurismo" style="
					background-image: url('img/portas/portaTUR.png');
					background-size: 100% 100%;
 					left: 50vw;
					height: 17vw;
					width: 8vw;">
	
 					</div>
 					<div id="portaManutencao" style="
 					background-image: url('img/portas/portaMAN.png');
					background-size: 100% 100%;
 					left: 60vw;
					height: 17vw;
					width: 8vw;">

 					</div>
 					<div id="portaAdministracao" style="
					background-image: url('img/portas/portaADM.png');
					background-size: 100% 100%;
 					left: 70vw;
					height: 17vw;
					width: 8vw;">

 					</div>
 					<div id="portaInscricao" style="
 					background-image: url('img/portas/portaINSC.png');
					background-size: 100% 100%;
 					left: 90vw;
					height: 17vw;
					width: 8vw;">

 					</div>
				</div>
				`;	
					break;
				case 1:
				document.body.innerHTML = `
    			<div id="container" data-screen='inf' style='background-image: url("img/fundos/salaDS.png");background-size: 100% 100%;'>
				<div id="interactabilityDiv">
			
				</div>
				<div id="showInfo">
			
				</div>
	 			<div id='player' style="
	 			background-image: url('img/heracles/stopped.gif');
				background-size: 100% 100%;
				background-position: 0px 0px;
	 			left: 0.05vw;
	 			height: 12vw;
	 			width: 9vw;">
 				</div>
	
 				<div id="computadorUm" name='Computador: Javascript' style="
	 			background-image: url('img/objetos/compUm.png');
				background-size: 100% 100%;
 				left: 20vw;
				height: 17vw;
				width: 16vw;">

	    		</div>
	    		<div id="computadorDois" name='Computador: HTML' style="
	 			background-image: url('img/objetos/compUm.png');
				background-size: 100% 100%;
 				left: 40vw;
				height: 17vw;
				width: 16vw;">

	    		</div>
	    		<div id="computadorTres" name='Computador: CSS' style="
	 			background-image: url('img/objetos/compUm.png');
				background-size: 100% 100%;
				transform: scaleX(-1);
 				left: 60vw;
				height: 17vw;
				width: 16vw;">

				 </div>
				<div id="professora" name='Explicação' style="
	 			background-image: url('img/objetos/professora.png');
				background-size: 100% 100%;
 				left: 80vw;
				height: 17vw;
				width: 14vw;">

	    		</div>`;
	    			break;
	    		case 7:
	    			window.open("https://www.vestibulinhoetec.com.br/candidato/dados-acesso.asp");
	    			break;
	    		default:
	    			sala = false; 
	    			alert("Ação ainda não implementada!");
	    			break;
			}
			if(sala)
			{
				salaAtual = sala;
			}else{}
		}
		function limparElemento(elemento)
		{
			
			document.getElementById(elemento).innerHTML = "";
		}
		function escrever(texto, elemento)
        {
        	document.getElementById(elemento).innerHTML = "";
        	
        	if(escritor)
        	{
        		clearInterval(escritor);
        	}
            var contador = 0;
            escritor = setInterval(() => {                    
            	if(contador > texto.length)
            	{
                	clearInterval(escritor);
            	}                
            	document.getElementById(elemento).innerHTML += texto.substr(contador,1);      
            	document.getElementById(elemento).scrollTop = document.getElementById(elemento).scrollHeight;
            	contador++;                                                      
            }, 40);         
        }
        function interactDialog()
        {
        	var contando = 0;
        	while(interagindo != objetos[salaAtual][contando].getId() || contando >= 1000)
        	{
        		contando++;
        	}
        	switch(objetos[salaAtual][contando].getTypeInteract())
        	{
        		case 'computador':
        			if(objetos[salaAtual][contando].getData().nextPart())
        			{
        				comandos = true;
        				document.getElementById(objetos[salaAtual][contando].getData().getId()).innerHTML = objetos[salaAtual][contando].getName();
        			}
        			escrever(objetos[salaAtual][contando].getData().getParts()[objetos[salaAtual][contando].getData().getActualPart()].getText(),'computadorTexto');
        			
        			break;
        	}
        }
</script>
<script type="text/javascript">
		mudarLugar(0);
	</script>
</html>


